
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://braincore.github.io/hai-cli/repl/tasks/">
      
      
        <link rel="prev" href="../tools/">
      
      
        <link rel="next" href="../assets/">
      
      
        
      
      
      <link rel="icon" href="../../image/hai-favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Tasks - hai</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="yellow" data-md-color-accent="yellow">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tasks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="hai" class="md-header__button md-logo" aria-label="hai" data-md-component="logo">
      
  <img src="../../image/hai-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            hai
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tasks
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://www.github.com/braincore/hai-cli" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    hai-cli
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="hai" class="md-nav__button md-logo" aria-label="hai" data-md-component="logo">
      
  <img src="../../image/hai-logo.svg" alt="logo">

    </a>
    hai
  </label>
  
    <div class="md-nav__source">
      <a href="https://www.github.com/braincore/hai-cli" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    hai-cli
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/api-keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API keys
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/getting-help/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting help
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    REPL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    REPL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-a-task-from-the-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use a task from the repository
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use a task from the repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching-for-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Searching for a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Updating a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-a-specific-version" class="md-nav__link">
    <span class="md-ellipsis">
      
        Run a specific version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task cache
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trusting-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Trusting a task
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writing a task
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing a task">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-toml-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task TOML Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publish-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Publish a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Edit a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-task-to-write-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using a task to write a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-specific-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task-specific commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-warning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security warning
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Assets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Stdlib
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../send-email/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Send email
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../account/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Account
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    CLI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/subcommands-and-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Subcommands and options
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/run-and-exit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Run and exit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/incognito/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Incognito
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/using-with-vim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using with vim
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/websocket-queue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Websocket queue
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Config
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-a-task-from-the-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use a task from the repository
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use a task from the repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching-for-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Searching for a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Updating a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-a-specific-version" class="md-nav__link">
    <span class="md-ellipsis">
      
        Run a specific version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task cache
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trusting-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Trusting a task
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writing a task
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing a task">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-toml-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task TOML Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publish-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Publish a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Edit a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-task-to-write-a-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using a task to write a task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-specific-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        Task-specific commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-warning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security warning
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="tasks">Tasks<a class="headerlink" href="#tasks" title="Permanent link">&para;</a></h1>
<p>A <em>task</em> in hai is a prompt-on-steroids that can be:</p>
<ol>
<li>Published publicly: <code>/task-publish &lt;path&gt;</code></li>
<li>Executed by anyone using the task repo: <code>/task &lt;username&gt;/&lt;task_name&gt;</code></li>
<li>Or, executed from a file: <code>/task &lt;path&gt;</code> (must start with <code>./</code>, <code>/</code>, or <code>~</code>)</li>
</ol>
<p>A <em>task</em> is made up of steps: a sequence of repl-commands. The commands are the
same as the ones you use. A step can:</p>
<ul>
<li>Provide context</li>
<li>Load resources (file, image, asset, URL)</li>
<li>Execute local programs</li>
<li>Prompt the user with a question</li>
<li>Prompt the AI</li>
<li>Cache program executions, functions, prompt responses, and answers-by-users</li>
</ul>
<p>Tasks make sharing workflows easy and improve their reproducibility given the
non-deterministic nature of LLMs.</p>
<h2 id="use-a-task-from-the-repository">Use a task from the repository<a class="headerlink" href="#use-a-task-from-the-repository" title="Permanent link">&para;</a></h2>
<p>The command to launch a task is as follows:</p>
<div class="highlight"><pre><span></span><code>/task &lt;task-fully-qualified-name&gt;
</code></pre></div>
<p>Every task is published under a user account. The fully-qualified name follows
the following format: <code>&lt;username&gt;/&lt;task-name&gt;</code></p>
<p>As an example, try:</p>
<div class="highlight"><pre><span></span><code>/task ken/absolute-mode
</code></pre></div>
<p>This runs the <code>absolute-mode</code> task published by the user <code>ken</code>.</p>
<p>It's a simple task that does only one thing: adds a system-prompt that removes
all bedside manner from the LLM. You can view the task
<a href="https://hai.superego.ai/task/ken/absolute-mode">here</a>.</p>
<p>Alternatively, you can view the task with:</p>
<div class="highlight"><pre><span></span><code>/task-view ken/absolute-mode
</code></pre></div>
<h3 id="task-mode">Task mode<a class="headerlink" href="#task-mode" title="Permanent link">&para;</a></h3>
<p>When running a task, the repl enters task-mode. You can see this in the repl's
left-hand prompt which includes the task's fully-qualified name:</p>
<div class="highlight"><pre><span></span><code>ken/absolute-mode[1]:
</code></pre></div>
<p>In task mode, <code>/new</code> (<code>/n</code>) resets the conversation to the initial task state.</p>
<p>To exit task mode, use <code>/task-end</code> or <code>Ctrl + D</code>.</p>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<p>Here are some interesting tasks:</p>
<ul>
<li><a href="https://hai.superego.ai/task/ken/pelican-bicycle"><code>ken/pelican-bicycle</code></a> -
  simonw's <a href="https://github.com/simonw/pelican-bicycle">pelicans on a bicycle</a>
  test</li>
<li><a href="https://hai.superego.ai/task/hai/help"><code>hai/help</code></a> - Get help using hai. Ask
  what's possible and how to do things.</li>
<li><a href="https://hai.superego.ai/task/hai/api"><code>hai/api</code></a> - Use or learn about hai's
  API.</li>
<li><a href="https://hai.superego.ai/task/hai/get-api-token"><code>hai/get-api-token</code></a> -
    Get an API token.</li>
<li><a href="https://hai.superego.ai/task/hai/code"><code>hai/code</code></a> - Ask the AI about
  hai's source code.</li>
<li><a href="https://hai.superego.ai/task/hai/email-asset-updates"><code>hai/email-asset-updates</code></a> -
  Get emails every time an asset is updated.</li>
<li><a href="https://hai.superego.ai/task/hai/add-email"><code>hai/add-email</code></a> - Verify your
    email address.</li>
<li><a href="https://hai.superego.ai/task/hai/keypair-setup"><code>hai/keypair-setup</code></a> -
  Setup an RSA public &amp; private key pair in your assets. The public key is made
  available to other users via your public asset pool
  (<code>/&lt;username&gt;/pubkey/public_rsa.pem</code>) which they can use to encrypt messages
  to you.</li>
<li><a href="https://hai.superego.ai/task/ken/asset-crypt"><code>ken/asset-crypt</code></a> -
  Encrypt and upload files from your machine to your assets. Or, download and
  decrypt assets you've encrypted with this task. Requires that the user has
  setup an RSA keypair with the
  <a href="https://hai.superego.ai/task/hai/keypair-setup"><code>hai/keypair-setup</code></a> task.</li>
<li><a href="https://hai.superego.ai/task/ken/weather"><code>ken/weather</code></a> - Get the weekly
  weather forecast.</li>
<li><a href="https://hai.superego.ai/task/ken/absolute-mode"><code>ken/absolute-mode</code></a> - Chat
  with an AI lacking all bedside manner.</li>
<li><a href="https://hai.superego.ai/task/ken/baby-play"><code>ken/baby-play</code></a> - Based on your
  baby's age, gives age-appropriate ideas for activities.</li>
<li><a href="https://hai.superego.ai/task/ken/flashcard-add"><code>ken/flashcard-add</code></a> - Helps
  you generate and save flashcards based on the current conversation.</li>
<li>Saves your flashcards as an asset: <code>flaschard/deck</code></li>
<li><a href="https://hai.superego.ai/task/ken/flashcard-review"><code>ken/flashcard-review</code></a> -
    Review random flashcards</li>
<li><a href="https://hai.superego.ai/task/ken/music-player"><code>ken/music-player</code></a> - Plays
  random MP3s from your <code>music/*.mp3</code> assets. If lyrics are available in the
  fileâ€™s <code>lrc</code> metadata, it can display them line-by-line as the song plays.</li>
<li><a href="https://hai.superego.ai/task/ken/youtube"><code>ken/youtube</code></a> - Get the transcript
  of a YouTube video using <a href="https://github.com/yt-dlp/yt-dlp"><code>yt-dlp</code></a>.</li>
<li><a href="https://hai.superego.ai/task/ken/pure-md-search"><code>ken/pure-md-search</code></a> - Add
  search results in markdown to your conversation. Needs API token (free tier
  available) from <a href="https://pure.md">pure.md</a>.
  [<a href="https://www.youtube.com/watch?v=YfSnY-MFrNw">Video</a>]</li>
<li><a href="https://hai.superego.ai/task/ken/code-review"><code>ken/code-review</code></a> - Get a
  code review of unstaged/staged/committed changes in your local git repo.</li>
<li><a href="https://hai.superego.ai/task/hai/quick-task"><code>hai/quick-task</code></a> - Ask AI to
  help you write a task.</li>
<li><a href="https://hai.superego.ai/task/ken/task-safety-checker"><code>ken/task-safety-checker</code></a> -
  Check that a task in the hai task repo isn't <em>obviously</em> destructive.</li>
<li><a href="https://hai.superego.ai/task/ken/calendar"><code>ken/calendar</code></a> -
  Manage your personal calendar using plain text assets.</li>
<li><a href="https://hai.superego.ai/task/ken/cargo-build-fix"><code>ken/cargo-build-fix</code></a> -
  Tries to patch rust code to fix <code>cargo build</code> errors automatically.</li>
</ul>
<h3 id="searching-for-a-task">Searching for a task<a class="headerlink" href="#searching-for-a-task" title="Permanent link">&para;</a></h3>
<p>You can find tasks that other users have published using:</p>
<div class="highlight"><pre><span></span><code>/task-search &lt;query&gt;
</code></pre></div>
<p>To see tasks published by a specific user, use:</p>
<div class="highlight"><pre><span></span><code>/whois &lt;username&gt;
</code></pre></div>
<h3 id="updating-a-task">Updating a task<a class="headerlink" href="#updating-a-task" title="Permanent link">&para;</a></h3>
<p>When a task is run, it's cached on your machine for folllow up invocations. To
replace your cached copy with the latest version of a task, use:</p>
<div class="highlight"><pre><span></span><code>/task-update &lt;task-fully-qualified-name&gt;
</code></pre></div>
<h3 id="run-a-specific-version">Run a specific version<a class="headerlink" href="#run-a-specific-version" title="Permanent link">&para;</a></h3>
<p>List all versions of a task:</p>
<div class="highlight"><pre><span></span><code>/task-versions &lt;task-fully-qualified-name&gt;
</code></pre></div>
<p>Run a specific version:</p>
<div class="highlight"><pre><span></span><code>/task &lt;task-fully-qualified-name&gt;@&lt;version&gt;
</code></pre></div>
<h3 id="task-cache">Task cache<a class="headerlink" href="#task-cache" title="Permanent link">&para;</a></h3>
<p>Tasks can cache some of their steps: <code>/ask-human.cache</code>, <code>/exec.cache</code>,
and <code>/prompt.cache</code>. To purge this cache, try:</p>
<div class="highlight"><pre><span></span><code>/task-purge &lt;task-fully-qualified-name&gt;
</code></pre></div>
<p>To invoke a task with a non-default cache bucket, use the <code>key</code> option:</p>
<div class="highlight"><pre><span></span><code>/task.key=&quot;&lt;cache_bucket&gt;&quot; &lt;task-fully-qualified-name&gt;
</code></pre></div>
<p>This lets you run a single task with a different configuration per key.</p>
<h3 id="trusting-a-task">Trusting a task<a class="headerlink" href="#trusting-a-task" title="Permanent link">&para;</a></h3>
<p>Some task steps require user confirmation because of the danger they pose (see
<a href="#security-warning">Security Warning</a>). To skip these confirmations, you can
set the <code>trust</code> option: <code>/task.trust</code></p>
<h2 id="writing-a-task">Writing a task<a class="headerlink" href="#writing-a-task" title="Permanent link">&para;</a></h2>
<p>Tasks are written in toml with a set of required fields:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Replace &lt;username&gt; with your own</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;username&gt;/demo-task&quot;</span>

<span class="c1"># Semantic version</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>

<span class="c1"># Displayed in /task-search</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A demo task to learn how to write them.&quot;</span>

<span class="c1"># Uncomment to require a specific version of hai</span>
<span class="c1">#dependencies = [</span>
<span class="c1">#    &quot;hai &gt;= 1.19.0&quot;</span>
<span class="c1">#]</span>

<span class="c1"># Uncomment to hide this task from your /whois profile and search</span>
<span class="c1"># unlisted = true</span>

<span class="c1"># List of repl-commands to execute to setup the task</span>
<span class="n">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;/system-prompt you&#39;re sherlock holmes&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;!!ls ~/Documents&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;/prompt based on the documents i keep, which star trek character am i?&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>
<p>Replace <code>&lt;username&gt;</code> and save this to a file called <code>demo-task.toml</code>. You can
now run the task from this local file:</p>
<div class="highlight"><pre><span></span><code>/task ./demo-task.toml
</code></pre></div>
<div class="admonition tip referencing local paths">
<p class="admonition-title">Tip</p>
<p>To avoid ambiguity with tasks in the repo, when specifying a local file the
file path must begin with <code>./</code>, <code>/</code>, or <code>~</code>.</p>
</div>
<h3 id="task-toml-reference">Task TOML Reference<a class="headerlink" href="#task-toml-reference" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>This must be your username followed by the name of your task. All tasks are namespaced by a username to avoid duplicates and confusion.</td>
</tr>
<tr>
<td><code>version</code></td>
<td>Must be a <a href="https://semver.org/">semantic version</a> (semver).</td>
</tr>
<tr>
<td><code>description</code></td>
<td>Explain what the task is for. Helps for task search.</td>
</tr>
<tr>
<td><code>dependencies</code></td>
<td>Require the <code>hai</code> client to satisfy a semver. Useful if the task uses a command that only became available after a certain version.</td>
</tr>
<tr>
<td><code>unlisted</code></td>
<td>Hides the task from search and your /whois profile.</td>
</tr>
<tr>
<td><code>steps</code></td>
<td>Every step is something you could have typed yourself into the CLI. At the conclusion of the steps, the user takes over with the context fully populated.</td>
</tr>
</tbody>
</table>
<h3 id="publish-a-task">Publish a task<a class="headerlink" href="#publish-a-task" title="Permanent link">&para;</a></h3>
<p>When your task is ready to publish, run:</p>
<div class="highlight"><pre><span></span><code>/task-publish ./path/to/demo-task.toml
</code></pre></div>
<p>Anyone can run your task by using its fully-qualified name:</p>
<div class="highlight"><pre><span></span><code>/task &lt;username&gt;/demo-task
</code></pre></div>
<h3 id="edit-a-task">Edit a task<a class="headerlink" href="#edit-a-task" title="Permanent link">&para;</a></h3>
<p>To edit one of your published tasks, use:</p>
<div class="highlight"><pre><span></span><code>/task-edit &lt;username&gt;/&lt;task-name&gt;
</code></pre></div>
<p>This downloads the task to a temporary file which you can edit with your editor
of choice before re-publishing.</p>
<div class="admonition tip referencing local paths">
<p class="admonition-title">Tip</p>
<p>To avoid ambiguity with tasks in the repo, when specifying a local file the
file path must begin with <code>./</code>, <code>/</code>, or <code>~</code>.</p>
</div>
<h3 id="using-a-task-to-write-a-task">Using a task to write a task<a class="headerlink" href="#using-a-task-to-write-a-task" title="Permanent link">&para;</a></h3>
<p>To have the AI help you write a task, use:</p>
<div class="highlight"><pre><span></span><code>/task hai/quick-task
</code></pre></div>
<p>You can discuss with the AI what you want the task to accomplish. When you're
done, save the task definition to a toml file and <code>/task-publish</code> it.</p>
<p>If you already have an active conversation with loaded resources (files, URLs,
or assets), you can ask the AI to use the current context as the basis for your
new task. This is especially useful for creating reusable tasks that
automatically load your commonly-used resources.</p>
<h3 id="task-specific-commands">Task-specific commands<a class="headerlink" href="#task-specific-commands" title="Permanent link">&para;</a></h3>
<p>There are some <code>hai</code>-repl commands that are specifically made for tasks:</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/ask-human &lt;prompt&gt;</code></td>
<td>Ask the user a question.</td>
</tr>
<tr>
<td><code>/ask-human.secret &lt;prompt&gt;</code></td>
<td>Ask a question; user's answer is treated as a secret and hidden.</td>
</tr>
<tr>
<td><code>/ask-human.cache &lt;prompt&gt;</code></td>
<td>Ask a question; previous answer is reused on rerun. Use <code>/task-forget</code> to reset.</td>
</tr>
<tr>
<td><code>/set-mask-secrets on</code></td>
<td>Mask AI output that includes secrets in the terminal. Useful for hiding sensitive info like API tokens.</td>
</tr>
<tr>
<td><code>/exec &lt;cmd&gt;</code></td>
<td>Execute a command on the local machine. Always prompts the user for confirmation.</td>
</tr>
<tr>
<td><code>/exec.cache &lt;cmd&gt;</code></td>
<td>Execute a command; output is cached and reused on rerun.</td>
</tr>
<tr>
<td><code>/prompt &lt;message&gt;</code></td>
<td>Explicitly prompt the AI with a message.</td>
</tr>
<tr>
<td><code>/prompt.cache &lt;message&gt;</code></td>
<td>Prompt the AI; cached output is reused on rerun to save time and cost.</td>
</tr>
<tr>
<td><code>/task-include &lt;name|path&gt;</code></td>
<td>Run task steps without entering or exiting task-mode. Useful for including tasks within other tasks.</td>
</tr>
<tr>
<td><code>/ai &lt;model&gt;</code></td>
<td>Set the AI model. In tasks, if the model isn't available, the current model remains unchanged.</td>
</tr>
<tr>
<td><code>/keep &lt;bottom&gt; [&lt;top&gt;]</code></td>
<td>Forget messages to bound conversation size; useful for looping tasks.</td>
</tr>
<tr>
<td><code>/pin.&lt;accent&gt; &lt;message&gt;</code></td>
<td>Add a message for the AI or user without prompting the AI for a response. Accent can be <code>danger</code>, <code>warn</code>, <code>info</code>, or <code>success</code>.</td>
</tr>
</tbody>
</table>
<h3 id="security-warning">Security warning<a class="headerlink" href="#security-warning" title="Permanent link">&para;</a></h3>
<p>The primary attack vector to defend against is a published task that's crafted
to delete or exfiltrate your data. Be careful when running any task. All
potentially dangerous commands require a "yes/no" confirmation.</p>
<p>Specifically, tasks may <code>/exec</code> commands on your machine which can both delete
and exfiltrate data (e.g. make an http request). Tasks may <code>/load</code> data that can
then be exfiltrated. Tasks may use a tool (e.g. <code>!sh</code> or <code>!py</code>) which can delete
and exfiltrate. Tasks may use the <code>!hai</code> tool which may generate a list of
commands that can delete and exfiltrate.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["content.tabs.link", "navigation.expand", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>